image: gitpod/workspace-postgres

tasks:

  # ------------------------------------
  # Start FusionAuth in Docker
  # ------------------------------------
  - name: fusionauth-server
    init: |
      apt-get install gh
      bash -c "curl -fsSL https://raw.githubusercontent.com/FusionAuth/fusionauth-install/main/install.sh | bash -s -"
      fusionauth/bin/startup.sh
      sudo -u postgres psql -c "ALTER USER postgres PASSWORD 'password';"

  # --------------------------------------
  - name: working-terminal
    init: |
      echo "Welcome to the FusionAuth GitPod instance"

ports:
  - port: 8888
    onOpen: open-preview
    visibility: public
  - port: 3000
    onOpen: ignore 
    visibility: public
  - port: 9011
    onOpen: ignore
    visibility: public
  - name: database
   port: 5432
   onOpen: ignore
